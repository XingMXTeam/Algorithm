# 008 HashMap

## Content

HashMap

## Concept

运动员编号->映射到运动员(编号可能直接映射不到运动员，可能还需要姓名+编号) 编号就是key。映射关系就是Hash Function，函数返回的值叫散列值/哈希值。

不同的key，可能得到是同一个散列值。也就是散列冲突。
开放寻址法：线性探测，二次探测，双重散列 缺点：需要特殊标记被删除的数据；冲突代价更高，装载因子不能太大(小于1)。 优点： 序列化简单；查询快； 适用于：数据量小，装载因子小的时候（比如Java中的ThreadLocalMap)
链表法：可以需要的时候再创建节点，内存利用率更高。但是因为多了一个指针的内存空间。所以适合存储大对象、大数据。
而且支持优化策略比如用红黑树或者跳表提高查询效率，最差（所有的数据都散列到同一个桶内）也是O(logn)。
（比如Java的HashMap 用链表实现 装载因子默认是0.75 当链表长度超过8 则采用红黑树）

装载因子 = 表中的元素个数/长度

常见哈希算法：MD5 SHA CRC

散列表碰撞攻击（Dos拒绝服务攻击）：查询消耗大量CPU或者线程资源

散列表动态扩容：装载因子过大，需要扩容。一般的操作是：重新申请内存空间，重新计算散列值会很慢。
解决办法是均摊扩容。扩容但不搬迁数据，当插入一条数据时，搬迁一条数据。

## Question

1. [LRU Cache - Hard](https://leetcode.com/problems/lru-cache/) 
时间复杂度为O(1)
在真实的实现中有一个hnext，用来作为散列表的拉链。当然js
中不需要考虑散列表底层实现。
缓存系统原型。

2. Word文档中的单词拼写检查

3. 10万条URL访问日志，如何按照访问次数给URL排序。

4. 有两个字符串数组，每个数组大约有 10 万条字符串，如何快速找出两个数组中相同的字符串？

以第一个数组构建散列表。key为字符串，value为出现次数。
然后遍历第二个数组。如果value大于0，说明存在相同字符串。
时间复杂度为O(n)。

5.假设猎聘网有 10 万名猎头，每个猎头都可以通过做任务（比如发布职位）来积累积分，然后通过积分来下载简历。假设你是猎聘网的一名工程师，如何在内存中存储这 10 万个猎头 ID 和积分信息，让它能够支持这样几个操作:

①根据猎头的 ID 快速查找、删除、更新这个猎头的积分信息；

②查找积分在某个区间的猎头 ID 列表；

③查找按照积分从小到大排名在第 x 位到第 y 位之间的猎头 ID 列表

积分排行构建跳表，以ID构建散列表。
1、2可以实现。3无法实现。

